/* ======================= EDITOR ========================= */

@page {
  margin: 10mm;
}

@page :first {
  margin-top: 0;
}

.remirror-editor-wrapper {
  @apply w-full max-w-full flex-1 flex-col;
}
.remirror-editor.ProseMirror {
  @apply h-full overflow-y-auto py-2 !important;
}

.editor-component {
  @apply h-full overflow-auto transition-colors duration-200;
  .remirror-editor.ProseMirror {
    @apply overflow-hidden !important;
  }
  &:has(*:focus) {
    @apply bg-zinc-700;
  }
}

.remirror-editor-wrapper:has(.remirror-is-empty) {
  @apply min-h-96;
}

.remirror-editor,
.Prosemirror,
.staticRendererContainer {
  @apply max-w-full p-4 font-lato focus-visible:outline-none;

  a[rel] {
    @apply text-sky-300 underline !important;
  }
  span.dice-roll {
    @apply cursor-pointer text-white underline decoration-dotted !important;
  }
  /* span.document-template-field {
    @apply font-mono text-white underline decoration-dashed underline-offset-2 !important;
  } */
  :is(h1, h2, h3, h4, h5, h6) {
    @apply font-bold m-0;
  }
  h1 {
    @apply text-2xl !important;
  }
  h2 {
    @apply text-xl !important;
  }
  h3 {
    @apply text-lg;
  }
  h4 {
    @apply text-base;
  }
  h5 {
    @apply text-sm;
  }
  h6 {
    @apply text-xs;
  }

  hr {
    margin: 0;
    margin-block-start: 0;
    margin-block-end: 0;
    @apply border-zinc-700 m-0 !important;
  }
  ol {
    @apply ml-1 list-decimal;
  }
  ul:not(.tableOfContentsList) {
    @apply ml-1 list-disc;
  }
  ol,
  ul {
    list-style-position: inside !important;
    padding-inline-start: 0.75rem;
    p:not(.ProseMirror-staticTrailingBreak) {
      display: inline !important;
    }
    li {
      @apply relative;
    }
  }
  ul[data-task-list] {
    .remirror-list-item-marker-container {
      @apply relative left-0 w-fit !important;
    }
    li {
      @apply outline-none;

      > * {
        @apply outline-none;
      }
    }
    label input {
      @apply relative m-0 -ml-1 mr-1 h-4 w-4 appearance-none rounded border bg-zinc-700 text-white outline-none;
      &:checked {
        @apply bg-zinc-400;

        &:after {
          content: "\2713";
          color: #fff;
          position: absolute;
          left: 50%;
          top: 50%;
          -webkit-transform: translate(-50%, -50%);
          -moz-transform: translate(-50%, -50%);
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
      }
    }
    div {
      @apply inline;
    }
  }
  blockquote {
    @apply my-2 border-0 px-0 text-3xl italic !important;
    *,
    p {
      @apply text-zinc-200 !important;
    }
    > * {
      @apply border-l-2 border-zinc-500 pl-2 !important;
    }
  }

  :not(.characterMentionImage >) {
    img {
      @apply p-1 !important;
    }
  }

  table {
    @apply block table-auto overflow-auto pb-1.5 !important;
    tbody {
      @apply overflow-auto !important;
      tr {
        @apply max-h-fit !important;
        td {
          @apply max-h-fit w-56 min-w-56 !important;

          p {
            @apply my-2 !important;
          }
        }
      }
    }
    th {
      @apply h-10 border p-0 text-xl;

      img {
        @apply py-2;
      }

      p {
        @apply m-0 -mt-px flex h-full items-center justify-center text-center;
      }
    }
    .selectedCell {
      @apply bg-blue-600 text-white !important;
    }

    &::-webkit-scrollbar {
      @apply h-2 w-2 cursor-pointer;
    }

    /* Track */
    &::-webkit-scrollbar-track {
      @apply z-0 bg-zinc-700;
    }

    /* Handle */
    &::-webkit-scrollbar-thumb {
      @apply z-0 cursor-pointer bg-zinc-500;
    }

    /* Handle on hover */
    &::-webkit-scrollbar-thumb:hover {
      @apply bg-zinc-400;
    }
    .scrollbar-hidden::-webkit-scrollbar {
      @apply hidden;
    }
  }

  .remirror-table-controller-wrapper {
    @apply hidden !important;
  }
  .annotation {
    @apply animate-pulse bg-transparent text-blue-400 !important;
  }
  .selectedAnnotation {
    @apply animate-pulse bg-transparent text-green-400 !important;
  }

  p {
    @apply text-base;
    .remirror-resizable-view {
      @apply inline-block;
      > * {
        @apply select-all;
      }
    }
  }

  img {
    @apply bg-transparent focus-visible:border-8 !important;
  }

  *[data-node-text-align="none"]:not(blockquote) {
    @apply float-none;
  }

  *[data-node-text-align="left"]:not(blockquote),
  [nodetextalignment="left"]:not(blockquote) {
    @apply mr-4 text-left;
  }

  *[data-node-text-align="right"]:not(blockquote),
  *[nodetextalignment="right"]:not(blockquote) {
    @apply ml-4 text-right;
  }
  *[nodetextalignment="center"]:not(blockquote) {
    @apply flex justify-center text-center;
  }

  div[data-callout-type="error"],
  div[data-callout-type="warning"],
  div[data-callout-type="success"],
  div[data-callout-type="info"] {
    @apply text-black !important;

    .remirror-mention-atom {
      a {
        @apply text-black !important;
      }
    }
  }
  div[data-callout-type="custom"] {
    @apply rounded border-l-4 p-2;
  }
  div[data-callout-type="info"] {
    @apply rounded border-l-4 border-[#3298dc] bg-[#eef6fc] p-2;
  }
  div[data-callout-type="error"] {
    @apply rounded border-l-4 border-[#f14668] bg-[#feecf0] p-2;
  }
  div[data-callout-type="warning"] {
    @apply rounded border-l-4 border-[#ffdd57] bg-[#fffbeb] p-2;
  }
  div[data-callout-type="success"] {
    @apply rounded border-l-4 border-[#48c774] bg-[#effaf3] p-2;
  }

  .remirror-list-item-with-custom-mark {
    &[data-checked] {
      div p {
        @apply line-through !important;
      }
    }
    .remirror-list-item-checkbox {
      @apply accent-sky-400 filter-none !important;
    }
  }

  .secretBlock {
    border: solid 2px rgba(131, 238, 255, 0.5);
    background-color: rgba(131, 238, 255, 0.2);
    padding: 1rem;
    border-radius: 0.1rem;
    overflow: auto;
  }

  .tableOfContentsList {
    @apply rounded bg-zinc-800 p-2 shadow;
  }

  .ProseMirror-selectednode {
    @apply outline-none;
  }
}
.staticRendererContainer {
  @apply h-full w-full;

  :is(h1, h2, h3, h4, h5, h6) {
    @apply text-white !important;
  }

  p:not(.ProseMirror-staticTrailingBreak) {
    @apply min-h-[1.5rem];
  }
  a {
    @apply cursor-pointer hover:text-sky-100 !important;
  }
  hr {
    @apply border-zinc-600 !important;
  }
  img {
    @apply inline-block max-w-full !important;
  }
  .spoiler {
    @apply cursor-pointer bg-zinc-700 px-2 text-zinc-700 transition-none;

    &::selection {
      @apply text-zinc-700;
    }

    .mention-atom-node-view-wrapper {
      @apply text-transparent;

      a {
        @apply transition-none;
      }
      .characterMentionImage {
        div {
          @apply bg-transparent transition-none;
        }
      }
    }
    .characterMentionImage {
      div {
        @apply bg-transparent transition-none;
      }
      img {
        @apply opacity-0 transition-none;
      }
    }
  }
  .spoiler:hover {
    @apply bg-transparent text-white !important;

    .mention-atom-node-view-wrapper {
      @apply text-white transition-none;
    }
    .characterMentionImage {
      div {
        @apply bg-zinc-600 transition-none;
      }
      img {
        @apply opacity-100;
      }
    }
  }
}
.drawerEventDescription {
  .staticRendererContainer {
    @apply p-0;
  }
}
.editor:focus {
  @apply outline-none;
}
.remirror-editor {
  @apply max-w-full overflow-hidden !important;
  &.ProseMirror {
    blockquote {
      @apply p-0 text-zinc-100 !important;
    }
  }
  .spoiler {
    @apply cursor-pointer bg-zinc-500 px-2 text-white transition-none;

    &::selection {
      @apply text-zinc-700;
    }

    &:hover {
      @apply bg-transparent text-white;

      .mention-atom-node-view-wrapper {
        @apply text-white transition-none;
      }
      .characterMentionImage {
        div {
          @apply bg-zinc-600 transition-none;
        }
        img {
          @apply opacity-100;
        }
      }
    }

    .mention-atom-node-view-wrapper {
      @apply text-transparent;

      a {
        @apply transition-none;
      }
      .characterMentionImage {
        div {
          @apply bg-transparent transition-none;
        }
      }
    }
    .characterMentionImage {
      div {
        @apply bg-transparent transition-none;
      }
      img {
        @apply opacity-0 transition-none;
      }
    }
  }
}

.commandMenu {
  @apply z-[100] !important;
}

.arrowSaveButton {
  @apply w-full !important;
}

/* Mentions */

.remirror-mention-atom-popup-wrapper {
  @apply overflow-hidden bg-zinc-700 p-0 !important;
}

.remirror-mention-atom-popup-item {
  @apply bg-zinc-700 text-white;
}

.remirror-mention-atom-popup-highlight {
  @apply bg-zinc-500;
}

.remirror-mention-atom-popup-name {
  @apply text-white !important;
}

.remirror-suggest-atom {
  @apply text-white !important;
}

.remirror-mention-atom {
  @apply p-0 !important;

  .mentionMapIcon {
    @apply text-sm !important;
  }
}
.remirror-suggest-atom.suggest-at {
  @apply text-white;
}
.remirror-mention-atom-popup-item.remirror-mention-atom-popup-highlight {
  @apply bg-blue-400;
}
.remirror-mention-atom-popup-item.remirror-mention-atom-popup-highlight .remirror-mention-atom-popup-name,
.remirror-mention-atom-popup-item.remirror-mention-atom-popup-hovered .remirror-mention-atom-popup-name {
  @apply text-white;
}
.remirror-mention-atom-popup-item.remirror-mention-atom-popup-hovered {
  @apply cursor-pointer bg-blue-200;
}

.secret-icon {
  @apply inline-block h-6 w-6 bg-no-repeat fill-white text-white;
  background-image: url("https://api.iconify.design/ph/eye-slash.svg?color=white");
  background-size: 100% 100%;
}

.staticRendererContainer blockquote .ProseMirror-staticTrailingBreak {
  @apply h-1;
}

.remirror-editor,
.staticRendererContainer {
  blockquote[nodetextalignment="center"] {
    @apply flex justify-center text-center !important;
  }
}
